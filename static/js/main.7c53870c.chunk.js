(this["webpackJsonphf-frontend"]=this["webpackJsonphf-frontend"]||[]).push([[0],{89:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(23),c=n.n(a),i=n(54),o=n(52),u=n(8),s=n(4),j=n.n(s),p=n(7),l=n(10),d=n(109),h=n(111),f=n(112),b=n(120),O=n(115),x=n(117),v=n(116),m=n(118),w=n(46),g=n.n(w),y=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL||"http://localhost:3001",k=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,S=function(){var e=Object(p.a)(j.a.mark((function e(t,n){var r,a,c,i,o,u,s,p=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]?p[2]:{},a=p.length>3?p[3]:void 0,c=p.length>4?p[4]:void 0,console.log("".concat(y).concat(n)),i={"Content-Type":"application/json"},a&&(i.authorization="Bearer ".concat(localStorage.getItem("hf-frontend@token"))),e.prev=6,e.next=9,g()({method:t,url:"".concat(y).concat(n),data:r,headers:i});case 9:(o=e.sent)&&c(o.data),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(6),window.alert((null===(u=e.t0.response)||void 0===u||null===(s=u.data)||void 0===s?void 0:s.message)||"Something wrong"),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(p.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("GET","/v1/recipe",t,!0,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(j.a.mark((function e(t,n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("GET","/v1/recipe/".concat(n),t,!0,r);case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),T=function(){var e=Object(p.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("POST","/v1/recipe",t,!0,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(j.a.mark((function e(t,n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("PUT","/v1/recipe/".concat(n),t,!0,r);case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(j.a.mark((function e(t,n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("DELETE","/v1/recipe/".concat(n),t,!0,r);case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(j.a.mark((function e(t,n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("POST","/v1/review/".concat(n),t,!0,r);case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),R=n(2),D=Object(d.a)({root:{marginBottom:30},title:{fontSize:14},pos:{marginBottom:12}}),q=function(e){var t=Object(r.useState)([]),n=Object(l.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)([]),o=Object(l.a)(i,2),u=o[0],s=o[1],d=Object(r.useState)(1),w=Object(l.a)(d,2),g=w[0],y=w[1],k=Object(r.useState)(""),S=Object(l.a)(k,2),C=S[0],T=S[1],E=Object(r.useState)(!1),q=Object(l.a)(E,2),I=q[0],B=q[1],L=Object(r.useState)(5),U=Object(l.a)(L,2),N=U[0],z=U[1],F=D();Object(r.useEffect)((function(){H()}),[I]);var H=function(){var e=Object(p.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_({},(function(e){c(e.recipes),s(e.recipes.slice(10*g,10*(g+1)))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P({},t,(function(e){var n=a.filter((function(e){return e._id!=t}));c(n)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A({message:C,rating:N},t,(function(e){B(!1),T("")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(R.jsxs)("div",{children:[Object(R.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){return e.history.push("/recipe/create/new")},children:"Create Recipe"}),Object(R.jsx)(f.a,{children:"Recipes List"}),u&&Object(R.jsx)(v.a,{count:a.length%10===0?a.length/10:Math.floor(a.length/10)+1,page:g,onChange:function(e,t){return function(e){y(e);var t=a.slice(10*(e-1),10*e);s(t)}(t)}}),u&&u.map((function(t){var n;return Object(R.jsx)(b.a,{className:F.root,children:Object(R.jsxs)(O.a,{children:[Object(R.jsxs)(f.a,{children:[Object(R.jsx)("b",{children:"Name "}),t.name]}),Object(R.jsxs)(f.a,{children:[Object(R.jsx)("b",{children:"Description "}),t.description]}),Object(R.jsxs)(f.a,{children:[Object(R.jsx)("b",{children:"Prep Time "}),t.prep_time_minutes||"unknown"]}),Object(R.jsxs)(f.a,{children:[Object(R.jsx)("b",{children:"Cook Time "}),t.cook_time_minutes||"unknown"]}),I==t._id&&Object(R.jsxs)("div",{children:[Object(R.jsx)(x.a,{type:"text",name:"message",value:C,required:!0,onChange:function(e){return T(e.target.value)}}),Object(R.jsx)(m.a,{name:"simple-controlled",value:N,onChange:function(e,t){z(t)}}),Object(R.jsx)("br",{}),Object(R.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){return W(t._id)},children:Object(R.jsx)(f.a,{children:"Save Review"})}),Object(R.jsx)("br",{})]}),Object(R.jsx)(h.a,{variant:"contained",onClick:function(){return e.history.push("/recipe/edit/".concat(t._id))},children:Object(R.jsx)(f.a,{children:"Update"})}),Object(R.jsx)(h.a,{variant:"contained",onClick:function(){return K(t._id)},children:Object(R.jsx)(f.a,{children:"Delete"})}),Object(R.jsx)(h.a,{variant:"contained",onClick:function(){return B(t._id)},children:Object(R.jsx)(f.a,{children:"Review"})}),Object(R.jsx)(f.a,{children:Object(R.jsx)("b",{children:"Reviews"})}),null===(n=t.reviews)||void 0===n?void 0:n.map((function(e){return Object(R.jsxs)("div",{children:[Object(R.jsx)(f.a,{children:e.message}),Object(R.jsx)(m.a,{name:"read-only",value:e.rating,readOnly:!0}),Object(R.jsx)(f.a,{children:e.user.email})]})}))]})})}))]})},I=function(){var e=Object(p.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("POST","/auth/signup",t,!1,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(p.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("POST","/auth/login",t,!1,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L=function(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(""),o=Object(l.a)(i,2),u=o[0],s=o[1],d=function(){var e=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),k.test(a)){e.next=4;break}return window.alert("Invalid email!"),e.abrupt("return");case 4:B({email:a,password:u},(function(e){localStorage.setItem("hf-frontend@token",e.token),window.location.href="/recipe"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(R.jsxs)("div",{children:[Object(R.jsx)(f.a,{children:"Email"}),Object(R.jsx)(x.a,{type:"text",name:"email",value:a,required:!0,onChange:function(e){return c(e.target.value)}}),Object(R.jsx)(f.a,{children:"Password"}),Object(R.jsx)(x.a,{type:"password",name:"password",value:u,required:!0,onChange:function(e){return s(e.target.value)}}),Object(R.jsx)("br",{}),Object(R.jsx)(h.a,{variant:"contained",color:"primary",onClick:d,children:"Submit"}),Object(R.jsx)(h.a,{variant:"contained",color:"secondary",onClick:function(){return e.history.push("/register")},children:"Register"})]})};var U=[{exact:!0,path:"/",component:q,needAuth:!0},{exact:!0,path:"/register",component:function(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(""),o=Object(l.a)(i,2),u=o[0],s=o[1],j=Object(r.useState)(""),p=Object(l.a)(j,2),d=p[0],b=p[1];return Object(R.jsxs)("div",{children:[Object(R.jsx)(f.a,{children:"Email"}),Object(R.jsx)(x.a,{type:"text",name:"email",value:a,required:!0,onChange:function(e){return c(e.target.value)}}),Object(R.jsx)(f.a,{children:"Password"}),Object(R.jsx)(x.a,{type:"password",name:"password",value:u,required:!0,onChange:function(e){return s(e.target.value)}}),Object(R.jsx)(f.a,{children:"Confirm Password"}),Object(R.jsx)(x.a,{type:"password",name:"new_password",value:d,required:!0,onChange:function(e){return b(e.target.value)}}),Object(R.jsx)("br",{}),Object(R.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),k.test(a)?u.length<8?window.alert("Password must be more than 8 characters!"):u==d?I({email:a,password:u},(function(e){localStorage.setItem("hf-frontend@token",e.token),window.location.href="/recipe"})):window.alert("Password doesn't match!"):window.alert("Invalid email!")},children:"Submit"}),Object(R.jsx)(h.a,{variant:"contained",color:"secondary",onClick:function(){return e.history.push("/login")},children:"Login"})]})},needAuth:!1},{exact:!0,path:"/recipe",component:q,needAuth:!0},{exact:!0,path:"/recipe/:type/:id",component:function(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(""),o=Object(l.a)(i,2),u=o[0],s=o[1],d=Object(r.useState)(""),b=Object(l.a)(d,2),O=b[0],v=b[1],m=Object(r.useState)(""),w=Object(l.a)(m,2),g=w[0],y=w[1],k=e.match.params,S=k.id,_=k.type;Object(r.useEffect)((function(){S&&"edit"==_&&P(S)}),[]);var P=function(){var e=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C({},t,(function(e){c(e.recipe.name),s(e.recipe.description),v(e.recipe.prep_time_minutes),y(e.recipe.cook_time_minutes)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var t=Object(p.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={name:a,description:u,prep_time_minutes:O,cook_time_minutes:g},t.next=3,T(n,(function(){e.history.push("/recipe")}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(){var t=Object(p.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={name:a,description:u,prep_time_minutes:O,cook_time_minutes:g},t.next=3,E(n,S,(function(){e.history.push("/recipe")}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(R.jsxs)("div",{children:[Object(R.jsx)(f.a,{children:"Name"}),Object(R.jsx)(x.a,{type:"text",value:a,required:!0,onChange:function(e){return c(e.target.value)}}),Object(R.jsx)(f.a,{children:"Description"}),Object(R.jsx)(x.a,{type:"text",value:u,required:!0,onChange:function(e){return s(e.target.value)}}),Object(R.jsx)(f.a,{children:"Prep Time"}),Object(R.jsx)(x.a,{type:"text",value:O,onChange:function(e){return v(e.target.value)}}),Object(R.jsx)(f.a,{children:"Cook Time"}),Object(R.jsx)(x.a,{type:"text",value:g,onChange:function(e){return y(e.target.value)}}),Object(R.jsx)("br",{}),"edit"==_?Object(R.jsx)(h.a,{onClick:D,variant:"contained",color:"secondary",children:Object(R.jsx)(f.a,{children:"Update"})}):"create"==_?Object(R.jsx)(h.a,{onClick:A,variant:"contained",color:"secondary",children:Object(R.jsx)(f.a,{children:"Create"})}):Object(R.jsx)(R.Fragment,{})]})},needAuth:!0}],N=function(){var e=localStorage.getItem("hf-frontend@token");return Object(R.jsx)(o.a,{children:Object(R.jsxs)(u.d,{children:[Object(R.jsx)(u.b,{exact:!0,path:"/login",component:L}),U.map((function(t,n){var r=t.component;return Object(R.jsx)(u.b,{path:t.path,exact:t.exact,render:function(n){return e||!t.needAuth?Object(R.jsx)(r,Object(i.a)({},n)):Object(R.jsx)(u.a,{to:"/login"})}},"router".concat(n))}))]})})};c.a.render(Object(R.jsx)(N,{}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.7c53870c.chunk.js.map